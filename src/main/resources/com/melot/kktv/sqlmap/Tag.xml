<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Tag">

    <!-- 读取用户标签 -->
    <select id ="getUserTags" parameterClass="java.lang.Integer" resultClass="java.lang.String">
        select LISTAGG(t1.tag_name, ',') WITHIN GROUP(ORDER BY t1.tag_name) from conf_tag t1 join res_user_tag t2
        	on t1.tag_id = t2.tag_id and t2.user_id = #userId#
    </select>
    
</sqlMap>

